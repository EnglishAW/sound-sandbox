(this["webpackJsonpsound-sandbox"]=this["webpackJsonpsound-sandbox"]||[]).push([[0],{61:function(e,n,t){},90:function(e,n,t){"use strict";t.r(n);var a=t(1),r=t.n(a),o=t(48),c=t.n(o),u=(t(61),t(6)),l=t(18),i=t(2),s=t(5),f=t(4),d=t(49),m=t(93),v=function(e,n){for(var t=e[0];t<e[1];t++)n(t)},b=Object(d.a)((function(){var e=Object(a.useState)(new window.AudioContext),n=Object(s.a)(e,2),t=n[0],r=n[1],o=Object(a.useState)((function(){var e=t.createGain();return e.gain.value=.5,e.connect(t.destination),e})),c=Object(s.a)(o,1)[0],u=Object(a.useState)([]),l=Object(s.a)(u,2),i=l[0],d=l[1];return{audioContextState:{audioContext:t,masterGainNode:c,oscillators:i},audioContextActions:{addOscillator:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"sine",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=t.createOscillator();r.type=n,r.frequency.value=e;var o=void 0!==a?t.createGain():c;a?(r.connect(o),o.connect(c),o.gain.value=a):r.connect(o),r.start();var u={id:Object(m.a)(),node:r,gainNode:o};return d((function(e){return[].concat(Object(f.a)(e),[u])})),u},addBufferSource:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=t.createBuffer(e.length,e[0].length,t.sampleRate);v([0,a.numberOfChannels],(function(n){a.copyToChannel(e[n],n)}));var r=t.createBufferSource();return r.buffer=a,r.loop=n,r.connect(t.destination),r.start(),r},stopAllOscillators:function(){i.forEach((function(e){e.node.stop(),e.node.disconnect()})),d([])},removeOscillator:function(e){var n=e.gainNode,a=t.currentTime,r=a+.4;n.gain.cancelScheduledValues(a),n.gain.setValueAtTime(n.gain.value,a),n.gain.linearRampToValueAtTime(0,r),e.node.stop(r),d((function(n){return n.filter((function(n){return e.id!==n.id}))}))},resetAudioContext:function(){t.close().then((function(){r(new window.AudioContext)}))}}}}),(function(e){return e.audioContextState}),(function(e){return e.audioContextActions})),p=Object(s.a)(b,3),h=p[0],y=p[1],E=p[2],g=t(7);function O(){var e=Object(u.a)(["\n    text-align: center;\n    width: 100%;\n    height: 50px;\n    margin: 0;\n    background-color: rgba(50, 50, 50, 0.5)\n"]);return O=function(){return e},e}function x(){var e=Object(u.a)(["\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n    align-items: center;\n    width: 75px;\n    height: 150px;\n    background-color: #a0a0a0;\n    user-select: none;\n    border: 1px solid black;\n    border-radius: 5px;\n    margin: 2px;\n"]);return x=function(){return e},e}function j(){var e=Object(u.a)(["\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 1rem;\n"]);return j=function(){return e},e}function K(e){var n=e.label,t=e.gain,a=e.onIncreaseGain,o=e.onDecreaseGain;return r.a.createElement(M,null,r.a.createElement(k,null,n||"Gain"),r.a.createElement(w,null,r.a.createElement("div",null,t),r.a.createElement("button",{onClick:a},"\u25b2"),r.a.createElement("button",{onClick:o},"\u25bc")))}var w=g.a.div(j()),M=g.a.div(x()),k=g.a.p(O()),C=t(17),S=function(e,n){var t=Math.pow(10,n||0);return Math.round((e+Number.EPSILON)*t)/t},G=1.2,R=1.5,A=function(e,n){return n*e},F=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.pow(e,t)*n},N=5/4,B=4/3,I=R,T=5/3,D=15/8,P=(A(9/8,440),A(N,440),A(B,440),A(I,440),A(T,440),A(D,440),A(880,440),function(e,n){return function(e,n,t){return F(G,F(R,t,e),n)}(e,n,440)}),L={KeyQ:P(-5,1),KeyW:P(-4,1),KeyE:P(-3,1),KeyR:P(-2,1),KeyT:P(-1,1),KeyY:P(0,1),KeyU:P(1,1),KeyI:P(2,1),KeyO:P(3,1),KeyP:P(4,1),KeyA:P(-4,0),KeyS:P(-3,0),KeyD:P(-2,0),KeyF:P(-1,0),KeyG:P(0,0),KeyH:P(1,0),KeyJ:P(2,0),KeyK:P(3,0),KeyL:P(4,0),Semicolon:P(5,0),KeyZ:P(-3,-1),KeyX:P(-2,-1),KeyC:P(-1,-1),KeyV:P(0,-1),KeyB:P(1,-1),KeyN:P(2,-1),KeyM:P(3,-1),Comma:P(4,-1),Period:P(5,-1)};function q(e){var n=e.keyMap,t=e.onKeysPressed,r=e.onKeysRelease,o=e.target,c=document.body,u=o||c,l=Object(a.useRef)({});return Object(a.useEffect)((function(){var e=function(e){var a=e.code;l.current[a]||n[a]&&(l.current[a]=t(n[a]))};u.addEventListener("keypress",e);var a=function(e){var n=e.code;l.current[n]&&(r&&r(l.current[n]),delete l.current[n])};return u.addEventListener("keyup",a),function(){u.removeEventListener("keypress",e),u.removeEventListener("keyup",a)}}),[n,t,r,u]),null}var U=t(52),W=t.n(U),H=function(e,n,t){return n*Math.sin(2*Math.PI*e*t)},V=function(e,n,t){var a=function(e,n){return new W.a(e/n).n}(t,e);return Float32Array.from({length:a},(function(e,n){return n+1})).map((function(a,r){for(var o=r%t/t,c=0,u=0;u<n.length;u++)c+=H(e*(u+1),n[u],o);return c}))},J=t(15);function _(){var e=Object(u.a)(["\n    display: inline-flex;\n    flex-direction: column;\n    justify-content: space-between;\n    align-items: center;\n"]);return _=function(){return e},e}function z(){var e=Object(u.a)(["\n    display: flex;\n"]);return z=function(){return e},e}var Q=function(e,n){return function(t){return Object(C.a)(e,(function(e){return a=1,(r=e+.05*n)<(t=0)?Math.max(r,t):Math.min(r,a);var t,a,r}),t)}},X=g.a.div(z()),Y=g.a.div(_()),Z=function(){var e=y(),n=e.audioContext,t=e.masterGainNode,o=E().addBufferSource,c=Object(a.useState)([.5,.1,.1,.1,.1,.1,.1]),u=Object(s.a)(c,2),l=u[0],i=u[1],f=Object(a.useState)(100*t.gain.value),d=Object(s.a)(f,2),m=d[0],v=d[1],b=Object(a.useState)([]),p=Object(s.a)(b,2),h=p[0],g=p[1];t.gain.value=m/100;var O=Object(a.useCallback)((function(e){var t=V(e,l,n.sampleRate);return g(t),o([t],!0)}),[o,n.sampleRate,l]),x=Object(a.useCallback)((function(e){return O(e)}),[O]),j=Object(a.useCallback)((function(e){e.stop(),e.disconnect(),g([])}),[]);q({keyMap:L,onKeysPressed:x,onKeysRelease:j});var w=Object(a.useMemo)((function(){return function(e,n,t){for(var a=e.slice(0,n),r=a.length/t,o=[],c=0;c<a.length;c++)c%r===0&&o.push({x:c,y:e[c]});return o}(h,600,300)}),[h]),M=w.length>0?w:[{x:0,y:0},{x:1,y:0}];return r.a.createElement("div",null,r.a.createElement("h3",null,"Harmonics"),r.a.createElement(X,null,l.map((function(e,n){return r.a.createElement("div",null,r.a.createElement(K,{label:"H".concat(n+1),gain:S(100*e),onIncreaseGain:function(){return i(Q(n,1))},onDecreaseGain:function(){return i(Q(n,-1))}}))})),r.a.createElement("div",{key:"master-gain"},r.a.createElement(K,{label:"Master Gain",gain:m,onIncreaseGain:function(e){v((function(e){return console.log(e),e<100?e+10:e}))},onDecreaseGain:function(e){v((function(e){return e>0?e-10:e}))}}))),r.a.createElement(Y,null,r.a.createElement(J.e,{width:400,height:300,xDomain:[0,600],yDomain:[-1.25,1.25]},r.a.createElement(J.d,null),r.a.createElement(J.f,null),r.a.createElement(J.a,null),r.a.createElement(J.c,null),r.a.createElement(J.b,{data:M,color:"#FF00FF"})),r.a.createElement("h4",null,"From buffer of the last note played")))};function $(){var e=Object(u.a)(["\n    display:flex;\n    justify-content: space-between;\n    padding: 5px;\n    > * {\n        margin: 0 10px;\n    }\n    border-bottom: 2px solid black;\n"]);return $=function(){return e},e}var ee=g.a.div($()),ne=function(){return r.a.createElement(ee,null,r.a.createElement(l.b,{to:"/relative-intervals"},"Relative Intervals"),r.a.createElement(l.b,{to:"/whitenoise"},"White Noise"),r.a.createElement(l.b,{to:"/random"},"Random Frequency"))},te=function(e,n){var t=n.numberOfChannels,a=function(e,n){var t=2*Math.PI*(1/n)*e;return t/(t+1)}(e,n.sampleRate),r=0,o=0;return Object(C.b)(0,t).forEach((function(e){n.getChannelData(e).forEach((function(e,n,t){if(0!==n){var c=t[n-1],u=e-c;r+=u,o++,t[n]=c+a*u}else t[n]=e*a}))})),console.log(r/o),n};function ae(){var e=Object(u.a)(["\n    display: flex;\n    justify-content: center;\n"]);return ae=function(){return e},e}var re={KeyM:"MUTE"},oe=g.a.div(ae()),ce=function(){var e=y(),n=e.masterGainNode,t=e.audioContext,o=Object(a.useState)(100*n.gain.value),c=Object(s.a)(o,2),u=c[0],l=c[1];n.gain.value=u/100,Object(a.useEffect)((function(){var e=t.createBufferSource(),a=function(e,n){for(var t=n.createBuffer(2,n.sampleRate*e,n.sampleRate),a=0;a<t.numberOfChannels;a++)for(var r=t.getChannelData(a),o=0;o<t.length;o++)r[o]=2*Math.random()-1;return t}(3,t);te(100,a),e.buffer=a,e.loop=!0,e.connect(n),e.start()}),[t,n]);var i=Object(a.useCallback)((function(e){if("MUTE"===e)return n.gain.value<.1?(console.log("mute off"),n.gain.value=.5,"MUTE_OFF"):(console.log("mute on"),n.gain.value=0,"MUTE_ON")}),[n]);q({keyMap:re,onKeysPressed:i});return r.a.createElement("div",null,r.a.createElement("h3",null,"White Noise"),r.a.createElement(oe,null,r.a.createElement(K,{gain:u,onIncreaseGain:function(e){l((function(e){return console.log(e),e<100?e+10:e}))},onDecreaseGain:function(e){l((function(e){return e>0?e-10:e}))}})))},ue=function(){var e=y().oscillators,n=E(),t=n.addOscillator,a=n.stopAllOscillators;return document.body.onkeyup=function(e){var n,r;"Space"===e.code&&t((n=100,r=1e3,n=Math.ceil(n),r=Math.floor(r),Math.floor(Math.random()*(r-n)+n))),"Escape"===e.code&&a()},r.a.createElement("div",null,r.a.createElement("h3",null,"Random Frequency"),r.a.createElement("p",null,"Space Bar - Add a random frequency ",r.a.createElement("br",null)," Escape - Stop all sounds"),e.map((function(e,n){return r.a.createElement("pre",{key:n},e.node.frequency.value," Hz")})))};var le=function(){return r.a.createElement(l.a,null,r.a.createElement(ne,null),r.a.createElement(i.c,null,r.a.createElement(i.a,{exact:!0,path:"/",component:Z}),r.a.createElement(i.a,{exact:!0,path:"/relative-intervals",component:Z}),r.a.createElement(i.a,{exact:!0,path:"/whitenoise",component:ce}),r.a.createElement(i.a,{exact:!0,path:"/random",component:ue}),r.a.createElement(i.a,{exact:!0,path:"/",component:Z}),r.a.createElement(i.a,{path:"/*"},r.a.createElement("div",null,"Not Found.."))))};function ie(){var e=Object(u.a)(["\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n"]);return ie=function(){return e},e}var se=g.a.div(ie()),fe=function(){return r.a.createElement(se,null,r.a.createElement("h3",null,"Sound Sandbox"),r.a.createElement(le,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));t(88),t(89);c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(h,null,r.a.createElement(fe,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[90,1,2]]]);
//# sourceMappingURL=main.b14fc12c.chunk.js.map